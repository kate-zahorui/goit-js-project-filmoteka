!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequirec2b7;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequirec2b7=i);var r=i("1kXJT"),s=i("iU1Pc");function o(e){return e.map((function(e){var t=e.poster_path,n=e.title,a=e.genres,i=e.release_date,r=e.vote_average,s=e.id,o=a.map((function(e){return e.name}));return o.length>2&&(o="".concat(o[0],", ").concat(o[1],", Other")),'<li class="list__item" id="'.concat(s,'">\n        <img class="list__img" src="https://image.tmdb.org/t/p/original/').concat(t,'" alt="').concat(n,'"></img>\n        <div class="list__text">\n        <h2 class="list__title">').concat(n,'</h2>\n        <p class="list__genre">').concat(o," | ").concat(i.slice(0,4),'&nbsp&nbsp\n        <span class="list__vote">').concat(r.toFixed(1),"</span></p>\n        </div>\n      </li>")})).join("")}var c=i("jcFG7"),l=document.querySelector(".js-library"),d=document.querySelector(".js-watched"),u=document.querySelector(".js-queue"),v=document.getElementById("tui-pagination-container"),g=r.default.load("watched");g=g||[];var m,f,p=r.default.load("queue");function y(e){"string"!=typeof e&&(e=e.target?e.target.name:"watched"),"queue"===e?(d.classList.remove("active"),u.classList.add("active")):(d.classList.add("active"),u.classList.remove("active")),r.default.save("library-state",e),function(e){f=window.innerWidth>=1280?9:window.innerWidth>=768?8:4;if(r.default.load(e)&&r.default.load(e).length){m=(0,c.default)(r.default.load(e).length,f),v.removeAttribute("style"),m.on("afterMove",(function(t){l.innerHTML=o(r.default.load(e).slice(t.page*f-f,t.page*f)),sessionStorage.setItem("page",t.page)}));var t=sessionStorage.getItem("savePage")||1;m.movePageTo(t),sessionStorage.removeItem("savePage")}else v.setAttribute("style","display: none"),l.innerHTML="",s.Notify.info("Your library is empty. You can add something")}(e)}p=p||[],i("5xtVg"),i("hbHJK");r=i("1kXJT");i("hbHJK");var h,L,w=i("bpxeT"),b=i("2TvXO"),E=(s=i("iU1Pc"),c=i("jcFG7"),(0,i("k07jD").default)()),S=document.querySelector(".js-library"),_=document.querySelector(".js-watched"),q=document.querySelector(".js-queue"),k=document.getElementById("tui-pagination-container"),x="watched";function T(e){x=e.target.name,j()}function j(){return I.apply(this,arguments)}function I(){return(I=e(w)(e(b).mark((function t(){var n,a;return e(b).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(sessionStorage.getItem("user")),e.next=3,E.readUserData(n.uid);case 3:if(a=e.sent){e.next=9;break}return E.writeUserData(n.uid,[],[],"watched"),e.next=8,E.readUserData(n.uid);case 8:a=e.sent;case 9:"queue"===x?(_.classList.remove("active"),q.classList.add("active")):(_.classList.add("active"),q.classList.remove("active")),a.state=x,E.writeUserData(n.uid,a.watched||[],a.queue||[],a.state),O(a[x]);case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function O(e){if(L=window.innerWidth>=1280?9:window.innerWidth>=768?8:4,e){h=(0,c.default)(e.length,L),k.removeAttribute("style"),h.on("afterMove",(function(t){S.innerHTML=o(e.slice(t.page*L-L,t.page*L)),sessionStorage.setItem("page",t.page)}));var t=sessionStorage.getItem("savePage")||1;h.movePageTo(t),sessionStorage.removeItem("savePage")}else k.setAttribute("style","display: none"),S.innerHTML="",s.Notify.info("Your library is empty. You can add something")}var M=i("95ECi"),P=(M=i("95ECi"),document.querySelector("#user")),U=document.querySelector(".js-watched"),D=document.querySelector(".js-queue");P.addEventListener("isLogedIn",(function(){U.addEventListener("click",T),D.addEventListener("click",T),U.removeEventListener("click",y),D.removeEventListener("click",y),j()}));var J=r.default.load("library-state");J=J||[];var N=JSON.parse(sessionStorage.getItem("user"));N?(P.textContent=N.displayName||"Anonymous",P.removeEventListener("click",M.registerOpen),P.addEventListener("click",M.logOutForm),U.addEventListener("click",T),D.addEventListener("click",T),j()):(P.removeEventListener("click",M.logOutForm),P.addEventListener("click",M.registerOpen),P.textContent="Login | Join",U.addEventListener("click",y),D.addEventListener("click",y),y(J))}();
//# sourceMappingURL=my-library.68da0eb5.js.map
