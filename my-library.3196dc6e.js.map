{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aCEe,SAAAC,EAAuBC,GAClC,OAAOA,EACFC,KACG,SAAAC,G,IACIC,EAAWD,EAAXC,YACAC,EAAKF,EAALE,MACAC,EAAMH,EAANG,OACAC,EAAYJ,EAAZI,aACAC,EAAYL,EAAZK,aACAC,EAAEN,EAAFM,GAEIC,EAAcJ,EAAOJ,KAAI,SAAAS,G,OAASA,EAAMC,I,IAI5C,OAHIF,EAAYG,OAAS,IACrBH,EAAc,GAAsBI,OAAnBJ,EAAY,GAAG,MAAmBI,OAAfJ,EAAY,GAAG,YAEvC,8BAC0CI,OADZL,EAAG,gFAC8BK,OAArBV,EAAY,WAEpDU,OAF6DT,EAAM,gFAGpES,OADCT,EAAM,0CACUS,OAAjBJ,EAAY,OAIVI,OAJeP,EAAaQ,MAC3C,EACA,GACF,iDACyCD,OAAxBN,EAAaQ,QAAQ,GAAG,2C,IAKlDC,KAAK,G,CA9BdlB,EAAA,S,iBDKMmB,EAAYC,SAASC,cAAc,eACnCC,EAAaF,SAASC,cAAc,eACpCE,EAAWH,SAASC,cAAc,aAClCG,EAAYJ,SAASK,eAAe,4BAE1CH,EAAWI,iBAAiB,QAASC,GACrCJ,EAASG,iBAAiB,QAASC,GAEnC,IAIIC,EAAY7B,EAAA8B,QAAMC,KAJC,WAKvBF,EAAYA,GAAwB,GAEpC,IAGIG,EAAYC,EAHZC,EAAYlC,EAAA8B,QAAMC,KAND,SAWd,SAASH,EAASO,GACF,iBAARA,IACPA,EAAMA,EAAIC,OAAOtB,MAGT,UAARqB,GACAZ,EAAWc,UAAUC,OAAO,UAC5Bd,EAASa,UAAUE,IAAI,YAEvBhB,EAAWc,UAAUE,IAAI,UACzBf,EAASa,UAAUC,OAAO,WAE9BtC,EAAA8B,QAAMU,KAtBe,gBAsBQL,GAIjC,SAAsBA,GAEdF,EADAQ,OAAOC,YAAc,KACX,EACHD,OAAOC,YAAc,IAClB,EACG,EAEb1C,EAAA8B,QAAMC,KAAKI,IACXH,GAAa,EAAAW,EAAAb,SAAc9B,EAAA8B,QAAMC,KAAKI,GAAKpB,OAAQkB,GACnDR,EAAUmB,gBAAgB,SAC1BZ,EAAWa,GAAG,aAAa,SAAAC,GAGvB1B,EAAU2B,UAAY7C,EAClBF,EAAA8B,QACKC,KAAKI,GACLlB,MAAM6B,EAAME,KAAOf,EAAUA,EAASa,EAAME,KAAOf,G,IAIhED,EAAWiB,WAAW,KAGtBxB,EAAUyB,aAAa,QAAS,iBAChC9B,EAAU2B,UAAY,GACtBI,EAAAC,OAAOC,KAAK,gD,CA5BhBC,CAAanB,E,CAjBjBD,EAAYA,GAAwB,G,mCEbpC,IAEIqB,EAAevD,EAAA8B,QAAMC,KAFA,iBAGzBwB,EAAeA,GAA8B,GAE7CC,QAAQC,IAAI,kBAAmBF,GAC/B3B,EAAS2B,E","sources":["src/js/buttonsMyLibHeader.js","src/js/libraryMarkup.js","src/my-library.js"],"sourcesContent":["import lsAPI from './localestorage';\nimport { Notify } from 'notiflix';\nimport libraryMarkup from './libraryMarkup';\nimport getPagination from './pagination';\n\nconst libraryEl = document.querySelector('.js-library');\nconst watchedBtn = document.querySelector('.js-watched');\nconst queueBtn = document.querySelector('.js-queue');\nconst container = document.getElementById('tui-pagination-container');\n\nwatchedBtn.addEventListener('click', btnClick);\nqueueBtn.addEventListener('click', btnClick);\n\nconst LS_WATCHED_KEY = 'watched';\nconst LS_QUEUE_KEY = 'queue';\nconst LS_LIBRARY_STATE = 'library-state';\n\nlet watchList = lsAPI.load(LS_WATCHED_KEY);\nwatchList = watchList ? watchList : [];\n\nlet queueList = lsAPI.load(LS_QUEUE_KEY);\nqueueList = queueList ? queueList : [];\n\nlet pagination, perPage, currentPage;\n\nexport function btnClick(btn) {\n    if (typeof btn !== 'string') {\n        btn = btn.target.name;\n    }\n\n    if (btn === 'queue') {\n        watchedBtn.classList.remove('active');\n        queueBtn.classList.add('active');\n    } else {\n        watchedBtn.classList.add('active');\n        queueBtn.classList.remove('active');\n    }\n    lsAPI.save(LS_LIBRARY_STATE, btn);\n    onPagination(btn);\n}\n\nfunction onPagination(btn) {\n    if (window.innerWidth >= 1280) {\n        perPage = 9;\n    } else if (window.innerWidth >= 768) {\n        perPage = 8;\n    } else perPage = 4;\n\n    if (lsAPI.load(btn)) {\n        pagination = getPagination(lsAPI.load(btn).length, perPage);\n        container.removeAttribute('style');\n        pagination.on('afterMove', event => {\n            // currentPage = event.page;\n            // render(btn);\n            libraryEl.innerHTML = libraryMarkup(\n                lsAPI\n                    .load(btn)\n                    .slice(event.page * perPage - perPage, event.page * perPage)\n            );\n        });\n\n        pagination.movePageTo(1);\n    } else {\n        // console.log('Чистота');\n        container.setAttribute('style', 'display: none');\n        libraryEl.innerHTML = '';\n        Notify.info('Your library is empty. You can add something');\n    }\n}\n\nexport const libraryList = {\n    render(ls) {\n        libraryEl.innerHTML = libraryMarkup(\n            lsAPI\n                .load(ls)\n                .slice(currentPage * perPage - perPage, currentPage * perPage)\n        );\n    },\n};\n","import getGenres from './getGenre';\n\nexport default function libraryMarkup(moviesSet) {\n    return moviesSet\n        .map(\n            ({\n                poster_path,\n                title,\n                genres,\n                release_date,\n                vote_average,\n                id,\n            }) => {\n                let movieGenres = genres.map(genre => genre.name);\n                if (movieGenres.length > 2) {\n                    movieGenres = `${movieGenres[0]}, ${movieGenres[1]}, Other`;\n                }\n                return /*html*/ `<li class=\"list__item\" id=\"${id}\">\n        <img class=\"list__img\" src=\"https://image.tmdb.org/t/p/original/${poster_path}\" alt=\"${title}\"></img>\n        <div class=\"list__text\">\n        <h2 class=\"list__title\">${title}</h2>\n        <p class=\"list__genre\">${movieGenres} | ${release_date.slice(\n                    0,\n                    4\n                )}&nbsp&nbsp\n        <span class=\"list__vote\">${vote_average.toFixed(1)}</span></p>\n        </div>\n      </li>`;\n            }\n        )\n        .join('');\n}\n","import './js/buttonsMyLibHeader';\nimport './js/modal';\nimport lsAPI from './js/localestorage';\nimport { watchedBtnClick, queueBtnClick } from './js/buttonsMyLibHeader';\nimport './js/modalSingUp';\nimport { btnClick } from './js/buttonsMyLibHeader';\n\n\nconst LS_LIBRARY_STATE = 'library-state';\n\nlet libraryState = lsAPI.load(LS_LIBRARY_STATE);\nlibraryState = libraryState ? libraryState : [];\n\nconsole.log('libraryState = ', libraryState);\nbtnClick(libraryState);\n"],"names":["$1kXJT","parcelRequire","$80c1fb273848d079$export$2e2bcd8739ae039","moviesSet","map","param","poster_path","title","genres","release_date","vote_average","id","movieGenres","genre","name","length","concat","slice","toFixed","join","$6ec37d3ef03e8204$var$libraryEl","document","querySelector","$6ec37d3ef03e8204$var$watchedBtn","$6ec37d3ef03e8204$var$queueBtn","$6ec37d3ef03e8204$var$container","getElementById","addEventListener","$6ec37d3ef03e8204$export$7b0f8be661aeb9d7","$6ec37d3ef03e8204$var$watchList","default","load","$6ec37d3ef03e8204$var$pagination","$6ec37d3ef03e8204$var$perPage","$6ec37d3ef03e8204$var$queueList","btn","target","classList","remove","add","save","window","innerWidth","$jcFG7","removeAttribute","on","event","innerHTML","page","movePageTo","setAttribute","$iU1Pc","Notify","info","$6ec37d3ef03e8204$var$onPagination","$865c390aa2d1ad34$var$libraryState","console","log"],"version":3,"file":"my-library.3196dc6e.js.map"}